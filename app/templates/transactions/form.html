{% extends "base.html" %}
{% block content %}
<h1 class="mb-3">{{ title }}</h1>

<form method="post">
  <div class="mb-3">
    <label class="form-label">Date</label>
    <input class="form-control" type="date" name="date"
           value="{{ (tx.txn_date|string) if tx else '' }}" required>
  </div>

  <div class="mb-3">
    <label class="form-label">Type</label>
    <select class="form-select" name="type" required>
      {% set t = tx.type if tx else '' %}
      <option value="income" {{ 'selected' if t=='income' else '' }}>Income</option>
      <option value="expense" {{ 'selected' if t=='expense' else '' }}>Expense</option>
    </select>
  </div>

  <div class="mb-3">
    <label class="form-label">Category</label>
    <input class="form-control" type="text" name="category"
           value="{{ tx.category if tx else '' }}" required>
  </div>

  <div class="mb-3">
    <label class="form-label">Subcategory (optional)</label>
    <input class="form-control" type="text" name="subcategory"
           value="{{ tx.subcategory if tx and tx.subcategory else '' }}">
  </div>

  <div class="mb-3">
    <label class="form-label">Amount</label>
    <input class="form-control" type="number" step="0.01" name="amount"
           value="{{ tx.amount if tx else '' }}" required>
  </div>

  <div class="mb-3">
    <label class="form-label">Currency</label>
    <input class="form-control" type="text" name="currency" maxlength="3"
           value="{{ tx.currency if tx else default_currency }}" required>
  </div>

  <div class="mb-3">
    <label class="form-label">Notes (optional)</label>
    <textarea class="form-control" name="notes" rows="2">{{ tx.notes if tx and tx.notes else '' }}</textarea>
  </div>

  <button class="btn btn-primary" type="submit">Save</button>
  <a class="btn btn-secondary" href="/transactions">Cancel</a>
</form>
{% endblock %}
